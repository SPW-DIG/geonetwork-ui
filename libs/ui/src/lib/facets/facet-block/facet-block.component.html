<div class="p-4" *ngIf="hasItems">
  <mat-expansion-panel
    [expanded]="expanded"
    (opened)="expanded = true"
    (closed)="expanded = false"
  >
    <mat-expansion-panel-header class="border-b-2">
      <mat-panel-title class="font-semibold">
        {{ 'facets.block.title.' + title | translate }}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div>
      <div *ngIf="canFilter">
        <svg
          class="h-4 w-4 my-2"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"
          />
        </svg>
      </div>
      <input
        type="text"
        class="
          w-full
          rounded
          border border-1 border-gray-300
          input-filter
          py-1
          px-2
          pl-8
          focus:outline-none
          focus:border-blue-400
        "
        *ngIf="canFilter"
        #filterInput
      />
      <ui-facet-item
        *ngFor="let item of getItems()"
        [label]="item.value"
        [count]="item.count"
        [selected]="isItemSelected(item)"
        (selectedChange)="onItemSelectedChange($event, item)"
        (invertedChange)="onItemInvertedChange($event, item)"
      ></ui-facet-item>
      <a href *ngIf="canShowMore()" class="a-more" (click)="onMoreClick($event)"
        >more</a
      >
    </div>
  </mat-expansion-panel>
</div>
